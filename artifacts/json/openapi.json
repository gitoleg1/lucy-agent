{"openapi":"3.1.0","info":{"title":"Lucy Agent API","version":"0.1.0"},"paths":{"/health":{"get":{"summary":"Health","operationId":"health_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/tasks/":{"post":{"tags":["tasks"],"summary":"Create Task","operationId":"create_task_tasks__post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TaskCreate"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TaskOut"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/tasks/{task_id}":{"get":{"tags":["tasks"],"summary":"Get Task","operationId":"get_task_tasks__task_id__get","parameters":[{"name":"task_id","in":"path","required":true,"schema":{"type":"string","title":"Task Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TaskOut"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/tasks/{task_id}/approve":{"post":{"tags":["tasks"],"summary":"Approve Task","operationId":"approve_task_tasks__task_id__approve_post","parameters":[{"name":"task_id","in":"path","required":true,"schema":{"type":"string","title":"Task Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApprovalIn"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TaskOut"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/tasks/{task_id}/run":{"post":{"tags":["tasks"],"summary":"Run Task","operationId":"run_task_tasks__task_id__run_post","parameters":[{"name":"task_id","in":"path","required":true,"schema":{"type":"string","title":"Task Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/RunOut"},"title":"Response Run Task Tasks  Task Id  Run Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/tasks/{task_id}/audit":{"get":{"tags":["tasks"],"summary":"Get Audit","operationId":"get_audit_tasks__task_id__audit_get","parameters":[{"name":"task_id","in":"path","required":true,"schema":{"type":"string","title":"Task Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/AuditOut"},"title":"Response Get Audit Tasks  Task Id  Audit Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/tasks/quick-run":{"post":{"tags":["tasks"],"summary":"Quick Run","operationId":"quick_run_tasks_quick_run_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/QuickRunIn"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/QuickRunOut"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/tasks/agent/shell":{"post":{"tags":["tasks"],"summary":"Agent Shell","operationId":"agent_shell_tasks_agent_shell_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AgentShellIn"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/QuickRunOut"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}}},"components":{"schemas":{"ActionIn":{"properties":{"type":{"type":"string","const":"shell","title":"Type","default":"shell"},"params":{"additionalProperties":true,"type":"object","title":"Params"}},"type":"object","title":"ActionIn"},"AgentShellIn":{"properties":{"cmd":{"type":"string","title":"Cmd"},"title":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Title","default":"agent-shell"}},"type":"object","required":["cmd"],"title":"AgentShellIn"},"ApprovalIn":{"properties":{"token":{"type":"string","title":"Token"},"decision":{"type":"string","enum":["APPROVE","REJECT"],"title":"Decision"},"decided_by":{"type":"string","title":"Decided By"}},"type":"object","required":["token","decision","decided_by"],"title":"ApprovalIn"},"AuditOut":{"properties":{"id":{"type":"string","title":"Id"},"task_id":{"type":"string","title":"Task Id"},"event":{"type":"string","title":"Event"},"data":{"additionalProperties":true,"type":"object","title":"Data"},"created_at":{"type":"string","title":"Created At"}},"type":"object","required":["id","task_id","event","created_at"],"title":"AuditOut"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"QuickRunIn":{"properties":{"title":{"type":"string","title":"Title","default":"autopilot"},"actions":{"items":{"$ref":"#/components/schemas/ActionIn"},"type":"array","title":"Actions"}},"type":"object","required":["actions"],"title":"QuickRunIn"},"QuickRunOut":{"properties":{"task":{"$ref":"#/components/schemas/TaskOut"},"runs":{"items":{"$ref":"#/components/schemas/RunOut"},"type":"array","title":"Runs"},"audit":{"items":{"$ref":"#/components/schemas/AuditOut"},"type":"array","title":"Audit"}},"type":"object","required":["task","runs","audit"],"title":"QuickRunOut"},"RunOut":{"properties":{"id":{"type":"string","title":"Id"},"task_id":{"type":"string","title":"Task Id"},"action_id":{"type":"string","title":"Action Id"},"status":{"type":"string","title":"Status"},"started_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Started At"},"ended_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Ended At"},"stdout_path":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Stdout Path"},"stderr_path":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Stderr Path"},"exit_code":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Exit Code"}},"type":"object","required":["id","task_id","action_id","status"],"title":"RunOut"},"TaskCreate":{"properties":{"title":{"type":"string","title":"Title"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"require_approval":{"type":"boolean","title":"Require Approval","default":false},"actions":{"items":{"$ref":"#/components/schemas/ActionIn"},"type":"array","title":"Actions"}},"type":"object","required":["title"],"title":"TaskCreate"},"TaskOut":{"properties":{"id":{"type":"string","title":"Id"},"title":{"type":"string","title":"Title"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"status":{"type":"string","title":"Status"},"require_approval":{"type":"integer","title":"Require Approval"},"created_at":{"type":"string","title":"Created At"},"updated_at":{"type":"string","title":"Updated At"},"started_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Started At"},"ended_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Ended At"},"approvals":{"items":{"additionalProperties":true,"type":"object"},"type":"array","title":"Approvals"}},"type":"object","required":["id","title","description","status","require_approval","created_at","updated_at","started_at","ended_at"],"title":"TaskOut"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}}}}